import { flattenState, getFunctionArguments } from '../helpers';
export const runInBrowser = ({ code, builder, context, event, localState, rootSetState, rootState }) => {
    const functionArgs = getFunctionArguments({
        builder,
        context,
        event,
        state: flattenState({
            rootState,
            localState,
            rootSetState
        })
    });
    return new Function(...functionArgs.map(([name]) => name), code)(...functionArgs.map(([, value]) => value));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJvd3Nlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9mdW5jdGlvbnMvZXZhbHVhdGUvYnJvd3Nlci1ydW50aW1lL2Jyb3dzZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFlBQVksRUFBRSxvQkFBb0IsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUNoRSxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxFQUMzQixJQUFJLEVBQ0osT0FBTyxFQUNQLE9BQU8sRUFDUCxLQUFLLEVBQ0wsVUFBVSxFQUNWLFlBQVksRUFDWixTQUFTLEVBQ0ksRUFBRSxFQUFFO0lBQ2pCLE1BQU0sWUFBWSxHQUFHLG9CQUFvQixDQUFDO1FBQ3hDLE9BQU87UUFDUCxPQUFPO1FBQ1AsS0FBSztRQUNMLEtBQUssRUFBRSxZQUFZLENBQUM7WUFDbEIsU0FBUztZQUNULFVBQVU7WUFDVixZQUFZO1NBQ2IsQ0FBQztLQUNILENBQUMsQ0FBQztJQUNILE9BQU8sSUFBSSxRQUFRLENBQUMsR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzlHLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRXhlY3V0b3JBcmdzIH0gZnJvbSAnLi4vaGVscGVycyc7XG5pbXBvcnQgeyBmbGF0dGVuU3RhdGUsIGdldEZ1bmN0aW9uQXJndW1lbnRzIH0gZnJvbSAnLi4vaGVscGVycyc7XG5leHBvcnQgY29uc3QgcnVuSW5Ccm93c2VyID0gKHtcbiAgY29kZSxcbiAgYnVpbGRlcixcbiAgY29udGV4dCxcbiAgZXZlbnQsXG4gIGxvY2FsU3RhdGUsXG4gIHJvb3RTZXRTdGF0ZSxcbiAgcm9vdFN0YXRlXG59OiBFeGVjdXRvckFyZ3MpID0+IHtcbiAgY29uc3QgZnVuY3Rpb25BcmdzID0gZ2V0RnVuY3Rpb25Bcmd1bWVudHMoe1xuICAgIGJ1aWxkZXIsXG4gICAgY29udGV4dCxcbiAgICBldmVudCxcbiAgICBzdGF0ZTogZmxhdHRlblN0YXRlKHtcbiAgICAgIHJvb3RTdGF0ZSxcbiAgICAgIGxvY2FsU3RhdGUsXG4gICAgICByb290U2V0U3RhdGVcbiAgICB9KVxuICB9KTtcbiAgcmV0dXJuIG5ldyBGdW5jdGlvbiguLi5mdW5jdGlvbkFyZ3MubWFwKChbbmFtZV0pID0+IG5hbWUpLCBjb2RlKSguLi5mdW5jdGlvbkFyZ3MubWFwKChbLCB2YWx1ZV0pID0+IHZhbHVlKSk7XG59Il19