import { evaluate } from './evaluate/evaluate';
export function getBlockComponentOptions(block, context) {
    return {
        ...block.component?.options,
        ...block.options,
        ...evaluateTextComponentTextOption(block, context)
    };
}
const evaluateTextComponentTextOption = (block, context) => {
    if (block.component?.name === 'Text' && block.component.options?.text && typeof block.component.options.text === 'string') {
        return {
            ...block.component.options,
            text: block.component.options.text.replace(/{{([^}]+)}}/g, (_match, group) => evaluate({
                code: group,
                context,
                localState: context.localState,
                rootState: context.rootState,
                rootSetState: context.rootSetState
            }))
        };
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWJsb2NrLWNvbXBvbmVudC1vcHRpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2Z1bmN0aW9ucy9nZXQtYmxvY2stY29tcG9uZW50LW9wdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQy9DLE1BQU0sVUFBVSx3QkFBd0IsQ0FBQyxLQUFtQixFQUFFLE9BQStGO0lBQzNKLE9BQU87UUFDTCxHQUFHLEtBQUssQ0FBQyxTQUFTLEVBQUUsT0FBTztRQUMzQixHQUFJLEtBQWEsQ0FBQyxPQUFPO1FBQ3pCLEdBQUcsK0JBQStCLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQztLQUNuRCxDQUFDO0FBQ0osQ0FBQztBQUNELE1BQU0sK0JBQStCLEdBQUcsQ0FBQyxLQUFtQixFQUFFLE9BQStGLEVBQUUsRUFBRTtJQUMvSixJQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUUsSUFBSSxLQUFLLE1BQU0sSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxJQUFJLElBQUksT0FBTyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEtBQUssUUFBUSxFQUFFO1FBQ3pILE9BQU87WUFDTCxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTztZQUMxQixJQUFJLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQyxNQUFjLEVBQUUsS0FBYSxFQUFFLEVBQUUsQ0FBRSxRQUFRLENBQUM7Z0JBQ3RHLElBQUksRUFBRSxLQUFLO2dCQUNYLE9BQU87Z0JBQ1AsVUFBVSxFQUFFLE9BQU8sQ0FBQyxVQUFVO2dCQUM5QixTQUFTLEVBQUUsT0FBTyxDQUFDLFNBQVM7Z0JBQzVCLFlBQVksRUFBRSxPQUFPLENBQUMsWUFBWTthQUNuQyxDQUFZLENBQUM7U0FDZixDQUFDO0tBQ0g7QUFDSCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJ1aWxkZXJDb250ZXh0SW50ZXJmYWNlIH0gZnJvbSAnLi4vY29udGV4dC90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IEJ1aWxkZXJCbG9jayB9IGZyb20gJy4uL3R5cGVzL2J1aWxkZXItYmxvY2snO1xuaW1wb3J0IHsgZXZhbHVhdGUgfSBmcm9tICcuL2V2YWx1YXRlL2V2YWx1YXRlJztcbmV4cG9ydCBmdW5jdGlvbiBnZXRCbG9ja0NvbXBvbmVudE9wdGlvbnMoYmxvY2s6IEJ1aWxkZXJCbG9jaywgY29udGV4dDogUGljazxCdWlsZGVyQ29udGV4dEludGVyZmFjZSwgJ2xvY2FsU3RhdGUnIHwgJ2NvbnRleHQnIHwgJ3Jvb3RTdGF0ZScgfCAncm9vdFNldFN0YXRlJz4pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5ibG9jay5jb21wb25lbnQ/Lm9wdGlvbnMsXG4gICAgLi4uKGJsb2NrIGFzIGFueSkub3B0aW9ucyxcbiAgICAuLi5ldmFsdWF0ZVRleHRDb21wb25lbnRUZXh0T3B0aW9uKGJsb2NrLCBjb250ZXh0KVxuICB9O1xufVxuY29uc3QgZXZhbHVhdGVUZXh0Q29tcG9uZW50VGV4dE9wdGlvbiA9IChibG9jazogQnVpbGRlckJsb2NrLCBjb250ZXh0OiBQaWNrPEJ1aWxkZXJDb250ZXh0SW50ZXJmYWNlLCAnbG9jYWxTdGF0ZScgfCAnY29udGV4dCcgfCAncm9vdFN0YXRlJyB8ICdyb290U2V0U3RhdGUnPikgPT4ge1xuICBpZiAoYmxvY2suY29tcG9uZW50Py5uYW1lID09PSAnVGV4dCcgJiYgYmxvY2suY29tcG9uZW50Lm9wdGlvbnM/LnRleHQgJiYgdHlwZW9mIGJsb2NrLmNvbXBvbmVudC5vcHRpb25zLnRleHQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmJsb2NrLmNvbXBvbmVudC5vcHRpb25zLFxuICAgICAgdGV4dDogYmxvY2suY29tcG9uZW50Lm9wdGlvbnMudGV4dC5yZXBsYWNlKC97eyhbXn1dKyl9fS9nLCAoX21hdGNoOiBzdHJpbmcsIGdyb3VwOiBzdHJpbmcpID0+IChldmFsdWF0ZSh7XG4gICAgICAgIGNvZGU6IGdyb3VwLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBsb2NhbFN0YXRlOiBjb250ZXh0LmxvY2FsU3RhdGUsXG4gICAgICAgIHJvb3RTdGF0ZTogY29udGV4dC5yb290U3RhdGUsXG4gICAgICAgIHJvb3RTZXRTdGF0ZTogY29udGV4dC5yb290U2V0U3RhdGVcbiAgICAgIH0pIGFzIHN0cmluZykpXG4gICAgfTtcbiAgfVxufSJdfQ==