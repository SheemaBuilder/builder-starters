import { Component, ViewChild, Input, } from "@angular/core";
import { CommonModule } from "@angular/common";
import { isEditing } from "../../functions/is-editing";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export default class BlocksWrapper {
    get className() {
        return [
            "builder-blocks",
            !this.blocks?.length ? "no-blocks" : "",
            this.classNameProp,
        ]
            .filter(Boolean)
            .join(" ");
    }
    get dataPath() {
        if (!this.path) {
            return undefined;
        }
        const thisPrefix = "this.";
        const pathPrefix = "component.options.";
        return this.path.startsWith(thisPrefix)
            ? this.path.replace(thisPrefix, "")
            : this.path.startsWith(pathPrefix)
                ? this.path
                : `${pathPrefix}${this.path || ""}`;
    }
    onClick() {
        if (isEditing() && !this.blocks?.length) {
            window.parent?.postMessage({
                type: "builder.clickEmptyBlocks",
                data: {
                    parentElementId: this.parent,
                    dataPath: this.dataPath,
                },
            }, "*");
        }
    }
    onMouseEnter() {
        if (isEditing() && !this.blocks?.length) {
            window.parent?.postMessage({
                type: "builder.hoverEmptyBlocks",
                data: {
                    parentElementId: this.parent,
                    dataPath: this.dataPath,
                },
            }, "*");
        }
    }
    constructor(vcRef) {
        this.vcRef = vcRef;
        this.mergedInputs_2eim3t = {};
    }
    ngAfterContentInit() {
        this.mergedInputs_2eim3t = {
            ref: this.blocksWrapperRef,
            class: this.className + " props-blocks-wrapper",
            "builder-path": this.dataPath,
            "builder-parent-id": this.parent,
            style: this.styleProp,
            onClick: this.onClick.bind(this),
            onMouseEnter: this.onMouseEnter.bind(this),
            onKeyPress: this.onClick.bind(this),
            ...this.BlocksWrapperProps,
        };
        if (typeof window !== "undefined") {
        }
        this.myContent = [
            this.vcRef.createEmbeddedView(this.blockswrapperTemplateRef).rootNodes,
        ];
    }
    ngOnChanges(changes) {
        if (typeof window !== "undefined") {
            this.mergedInputs_2eim3t = {
                ref: this.blocksWrapperRef,
                class: this.className + " props-blocks-wrapper",
                "builder-path": this.dataPath,
                "builder-parent-id": this.parent,
                style: this.styleProp,
                onClick: this.onClick.bind(this),
                onMouseEnter: this.onMouseEnter.bind(this),
                onKeyPress: this.onClick.bind(this),
                ...this.BlocksWrapperProps,
            };
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: BlocksWrapper, deps: [{ token: i0.ViewContainerRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: BlocksWrapper, isStandalone: true, selector: "blocks-wrapper", inputs: { blocks: "blocks", classNameProp: "classNameProp", path: "path", parent: "parent", styleProp: "styleProp", BlocksWrapperProps: "BlocksWrapperProps", BlocksWrapper: "BlocksWrapper" }, viewQueries: [{ propertyName: "blocksWrapperRef", first: true, predicate: ["blocksWrapperRef"], descendants: true }, { propertyName: "blockswrapperTemplateRef", first: true, predicate: ["blockswrapperTemplate"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: `
    <ng-template #blockswrapperTemplate><ng-content></ng-content></ng-template>
    <ng-container
      *ngComponentOutlet="
              BlocksWrapper;
              inputs: mergedInputs_2eim3t;
              content: myContent;
              "
    ></ng-container>
  `, isInline: true, styles: [":host{display:contents}.props-blocks-wrapper{display:flex;flex-direction:column;align-items:stretch}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgComponentOutlet, selector: "[ngComponentOutlet]", inputs: ["ngComponentOutlet", "ngComponentOutletInputs", "ngComponentOutletInjector", "ngComponentOutletContent", "ngComponentOutletNgModule", "ngComponentOutletNgModuleFactory"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: BlocksWrapper, decorators: [{
            type: Component,
            args: [{ selector: "blocks-wrapper", template: `
    <ng-template #blockswrapperTemplate><ng-content></ng-content></ng-template>
    <ng-container
      *ngComponentOutlet="
              BlocksWrapper;
              inputs: mergedInputs_2eim3t;
              content: myContent;
              "
    ></ng-container>
  `, standalone: true, imports: [CommonModule], styles: [":host{display:contents}.props-blocks-wrapper{display:flex;flex-direction:column;align-items:stretch}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ViewContainerRef }]; }, propDecorators: { blocks: [{
                type: Input
            }], classNameProp: [{
                type: Input
            }], path: [{
                type: Input
            }], parent: [{
                type: Input
            }], styleProp: [{
                type: Input
            }], BlocksWrapperProps: [{
                type: Input
            }], BlocksWrapper: [{
                type: Input
            }], blocksWrapperRef: [{
                type: ViewChild,
                args: ["blocksWrapperRef"]
            }], blockswrapperTemplateRef: [{
                type: ViewChild,
                args: ["blockswrapperTemplate", { static: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmxvY2tzLXdyYXBwZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9ibG9ja3MvYmxvY2tzLXdyYXBwZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxTQUFTLEVBRVQsS0FBSyxHQUlOLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQW1CL0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDRCQUE0QixDQUFDOzs7QUE4QnZELE1BQU0sQ0FBQyxPQUFPLE9BQU8sYUFBYTtJQWdCaEMsSUFBSSxTQUFTO1FBQ1gsT0FBTztZQUNMLGdCQUFnQjtZQUNoQixDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDdkMsSUFBSSxDQUFDLGFBQWE7U0FDbkI7YUFDRSxNQUFNLENBQUMsT0FBTyxDQUFDO2FBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQztJQUNELElBQUksUUFBUTtRQUNWLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2QsT0FBTyxTQUFTLENBQUM7U0FDbEI7UUFDRCxNQUFNLFVBQVUsR0FBRyxPQUFPLENBQUM7UUFDM0IsTUFBTSxVQUFVLEdBQUcsb0JBQW9CLENBQUM7UUFDeEMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUM7WUFDckMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUM7WUFDbkMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQztnQkFDbEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJO2dCQUNYLENBQUMsQ0FBQyxHQUFH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Q0UsZ0JBQWdCLFlBQ2hCOzs7Ozs7Ozs7R0FTVCxjQWFXLElBQUksV0FDUCxDQUFDLFlBQVksQ0FBQzt1R0FHZCxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csYUFBYTtzQkFBckIsS0FBSztnQkFDRyxJQUFJO3NCQUFaLEtBQUs7Z0JBQ0csTUFBTTtzQkFBZCxLQUFLO2dCQUNHLFNBQVM7c0JBQWpCLEtBQUs7Z0JBQ0csa0JBQWtCO3NCQUExQixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBRXlCLGdCQUFnQjtzQkFBOUMsU0FBUzt1QkFBQyxrQkFBa0I7Z0JBRzdCLHdCQUF3QjtzQkFEdkIsU0FBUzt1QkFBQyx1QkFBdUIsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIFZpZXdDaGlsZCxcbiAgRWxlbWVudFJlZixcbiAgSW5wdXQsXG4gIFZpZXdDb250YWluZXJSZWYsXG4gIFRlbXBsYXRlUmVmLFxuICBTaW1wbGVDaGFuZ2VzLFxufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vblwiO1xuXG5leHBvcnQgdHlwZSBCbG9ja3NXcmFwcGVyUHJvcHMgPSB7XG4gIGJsb2NrczogQnVpbGRlckJsb2NrW10gfCB1bmRlZmluZWQ7XG4gIHBhcmVudDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBwYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHN0eWxlUHJvcDogUmVjb3JkPHN0cmluZywgYW55PiB8IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IHRoYXQgd3JhcHMgZWFjaCBsaXN0IG9mIGJsb2Nrcy4gRGVmYXVsdHMgdG8gYSBgZGl2YCBlbGVtZW50ICgnU2Nyb2xsVmlldycgaW4gUmVhY3QgTmF0aXZlKS5cbiAgICovXG4gIEJsb2Nrc1dyYXBwZXI6IGFueTtcbiAgLyoqXG4gICAqIEFkZGl0b25hbCBwcm9wcyB0byBwYXNzIHRvIGBibG9ja3NXcmFwcGVyYC4gRGVmYXVsdHMgdG8gYHt9YC5cbiAgICovXG4gIEJsb2Nrc1dyYXBwZXJQcm9wczogYW55O1xuICBjaGlsZHJlbj86IGFueTtcbiAgY2xhc3NOYW1lUHJvcD86IHN0cmluZztcbn07XG5cbmltcG9ydCB7IGlzRWRpdGluZyB9IGZyb20gXCIuLi8uLi9mdW5jdGlvbnMvaXMtZWRpdGluZ1wiO1xuaW1wb3J0IHR5cGUgeyBCdWlsZGVyQmxvY2sgfSBmcm9tIFwiLi4vLi4vdHlwZXMvYnVpbGRlci1ibG9ja1wiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6IFwiYmxvY2tzLXdyYXBwZXJcIixcbiAgdGVtcGxhdGU6IGBcbiAgICA8bmctdGVtcGxhdGUgI2Jsb2Nrc3dyYXBwZXJUZW1wbGF0ZT48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9uZy10ZW1wbGF0ZT5cbiAgICA8bmctY29udGFpbmVyXG4gICAgICAqbmdDb21wb25lbnRPdXRsZXQ9XCJcbiAgICAgICAgICAgICAgQmxvY2tzV3JhcHBlcjtcbiAgICAgICAgICAgICAgaW5wdXRzOiBtZXJnZWRJbnB1dHNfMmVpbTN0O1xuICAgICAgICAgICAgICBjb250ZW50OiBteUNvbnRlbnQ7XG4gICAgICAgICAgICAgIFwiXG4gICAgPjwvbmctY29udGFpbmVyPlxuICBgLFxuICBzdHlsZXM6IFtcbiAgICBgXG4gICAgICA6aG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGNvbnRlbnRzO1xuICAgICAgfVxuICAgICAgLnByb3BzLWJsb2Nrcy13cmFwcGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICB9XG4gICAgYCxcbiAgXSxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV0sXG59KVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmxvY2tzV3JhcHBlciB7XG4gIEBJbnB1dCgpIGJsb2NrcyE6IEJsb2Nrc1dyYXBwZXJQcm9wc1tcImJsb2Nrc1wiXTtcbiAgQElucHV0KCkgY2xhc3NOYW1lUHJvcCE6IEJsb2Nrc1dyYXBwZXJQcm9wc1tcImNsYXNzTmFtZVByb3BcIl07XG4gIEBJbnB1dCgpIHBhdGghOiBCbG9ja3NXcmFwcGVyUHJvcHNbXCJwYXRoXCJdO1xuICBASW5wdXQoKSBwYXJlbnQhOiBCbG9ja3NXcmFwcGVyUHJvcHNbXCJwYXJlbnRcIl07XG4gIEBJbnB1dCgpIHN0eWxlUHJvcCE6IEJsb2Nrc1dyYXBwZXJQcm9wc1tcInN0eWxlUHJvcFwiXTtcbiAgQElucHV0KCkgQmxvY2tzV3JhcHBlclByb3BzITogQmxvY2tzV3JhcHBlclByb3BzW1wiQmxvY2tzV3JhcHBlclByb3BzXCJdO1xuICBASW5wdXQoKSBCbG9ja3NXcmFwcGVyITogQmxvY2tzV3JhcHBlclByb3BzW1wiQmxvY2tzV3JhcHBlclwiXTtcblxuICBAVmlld0NoaWxkKFwiYmxvY2tzV3JhcHBlclJlZlwiKSBibG9ja3NXcmFwcGVyUmVmITogRWxlbWVudFJlZjtcblxuICBAVmlld0NoaWxkKFwiYmxvY2tzd3JhcHBlclRlbXBsYXRlXCIsIHsgc3RhdGljOiB0cnVlIH0pXG4gIGJsb2Nrc3dyYXBwZXJUZW1wbGF0ZVJlZiE6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgbXlDb250ZW50PzogYW55W11bXTtcblxuICBnZXQgY2xhc3NOYW1lKCkge1xuICAgIHJldHVybiBbXG4gICAgICBcImJ1aWxkZXItYmxvY2tzXCIsXG4gICAgICAhdGhpcy5ibG9ja3M/Lmxlbmd0aCA/IFwibm8tYmxvY2tzXCIgOiBcIlwiLFxuICAgICAgdGhpcy5jbGFzc05hbWVQcm9wLFxuICAgIF1cbiAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgIC5qb2luKFwiIFwiKTtcbiAgfVxuICBnZXQgZGF0YVBhdGgoKSB7XG4gICAgaWYgKCF0aGlzLnBhdGgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHRoaXNQcmVmaXggPSBcInRoaXMuXCI7XG4gICAgY29uc3QgcGF0aFByZWZpeCA9IFwiY29tcG9uZW50Lm9wdGlvbnMuXCI7XG4gICAgcmV0dXJuIHRoaXMucGF0aC5zdGFydHNXaXRoKHRoaXNQcmVmaXgpXG4gICAgICA/IHRoaXMucGF0aC5yZXBsYWNlKHRoaXNQcmVmaXgsIFwiXCIpXG4gICAgICA6IHRoaXMucGF0aC5zdGFydHNXaXRoKHBhdGhQcmVmaXgpXG4gICAgICA/IHRoaXMucGF0aFxuICAgICAgOiBgJHtwYXRoUHJlZml4fSR7dGhpcy5wYXRoIHx8IFwiXCJ9YDtcbiAgfVxuICBvbkNsaWNrKCkge1xuICAgIGlmIChpc0VkaXRpbmcoKSAmJiAhdGhpcy5ibG9ja3M/Lmxlbmd0aCkge1xuICAgICAgd2luZG93LnBhcmVudD8ucG9zdE1lc3NhZ2UoXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcImJ1aWxkZXIuY2xpY2tFbXB0eUJsb2Nrc1wiLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHBhcmVudEVsZW1lbnRJZDogdGhpcy5wYXJlbnQsXG4gICAgICAgICAgICBkYXRhUGF0aDogdGhpcy5kYXRhUGF0aCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcIipcIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgb25Nb3VzZUVudGVyKCkge1xuICAgIGlmIChpc0VkaXRpbmcoKSAmJiAhdGhpcy5ibG9ja3M/Lmxlbmd0aCkge1xuICAgICAgd2luZG93LnBhcmVudD8ucG9zdE1lc3NhZ2UoXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcImJ1aWxkZXIuaG92ZXJFbXB0eUJsb2Nrc1wiLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHBhcmVudEVsZW1lbnRJZDogdGhpcy5wYXJlbnQsXG4gICAgICAgICAgICBkYXRhUGF0aDogdGhpcy5kYXRhUGF0aCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcIipcIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgbWVyZ2VkSW5wdXRzXzJlaW0zdCA9IHt9IGFzIGFueTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHZjUmVmOiBWaWV3Q29udGFpbmVyUmVmKSB7fVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICB0aGlzLm1lcmdlZElucHV0c18yZWltM3QgPSB7XG4gICAgICByZWY6IHRoaXMuYmxvY2tzV3JhcHBlclJlZixcbiAgICAgIGNsYXNzOiB0aGlzLmNsYXNzTmFtZSArIFwiIHByb3BzLWJsb2Nrcy13cmFwcGVyXCIsXG4gICAgICBcImJ1aWxkZXItcGF0aFwiOiB0aGlzLmRhdGFQYXRoLFxuICAgICAgXCJidWlsZGVyLXBhcmVudC1pZFwiOiB0aGlzLnBhcmVudCxcbiAgICAgIHN0eWxlOiB0aGlzLnN0eWxlUHJvcCxcbiAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGljay5iaW5kKHRoaXMpLFxuICAgICAgb25Nb3VzZUVudGVyOiB0aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpLFxuICAgICAgb25LZXlQcmVzczogdGhpcy5vbkNsaWNrLmJpbmQodGhpcyksXG4gICAgICAuLi50aGlzLkJsb2Nrc1dyYXBwZXJQcm9wcyxcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB9XG5cbiAgICB0aGlzLm15Q29udGVudCA9IFtcbiAgICAgIHRoaXMudmNSZWYuY3JlYXRlRW1iZWRkZWRWaWV3KHRoaXMuYmxvY2tzd3JhcHBlclRlbXBsYXRlUmVmKS5yb290Tm9kZXMsXG4gICAgXTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5tZXJnZWRJbnB1dHNfMmVpbTN0ID0ge1xuICAgICAgICByZWY6IHRoaXMuYmxvY2tzV3JhcHBlclJlZixcbiAgICAgICAgY2xhc3M6IHRoaXMuY2xhc3NOYW1lICsgXCIgcHJvcHMtYmxvY2tzLXdyYXBwZXJcIixcbiAgICAgICAgXCJidWlsZGVyLXBhdGhcIjogdGhpcy5kYXRhUGF0aCxcbiAgICAgICAgXCJidWlsZGVyLXBhcmVudC1pZFwiOiB0aGlzLnBhcmVudCxcbiAgICAgICAgc3R5bGU6IHRoaXMuc3R5bGVQcm9wLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLm9uQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgb25Nb3VzZUVudGVyOiB0aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpLFxuICAgICAgICBvbktleVByZXNzOiB0aGlzLm9uQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgLi4udGhpcy5CbG9ja3NXcmFwcGVyUHJvcHMsXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuIl19