import { Component, ViewChild, Input, } from "@angular/core";
import { CommonModule } from "@angular/common";
import Blocks from "../../components/blocks/blocks";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export default class BuilderSlot {
    setAttributes(el, value, changes) {
        if (!el) {
            return;
        }
        const target = typeof changes === "undefined" ? value : changes;
        Object.keys(target).forEach((key) => {
            if (key.startsWith("on")) {
                if (this._listenerFns.has(key)) {
                    this._listenerFns.get(key)();
                }
                this._listenerFns.set(key, this.renderer.listen(el, key.replace("on", "").toLowerCase(), target[key]));
            }
            else {
                this.renderer.setAttribute(el, key.toLowerCase(), target[key] ?? "");
            }
        });
    }
    constructor(renderer) {
        this.renderer = renderer;
        this._listenerFns = new Map();
        this.node_0_div = null;
        this.node_1_div = null;
        this.node_2_Blocks = null;
        this.node_3_Blocks = null;
        this.node_4_Blocks = null;
    }
    ngOnInit() {
        this.node_0_div = {
            pointerEvents: "auto",
        };
        this.node_1_div = {
            ...(!this.builderContext.context?.symbolId && {
                "builder-slot": this.name,
            }),
        };
        this.node_2_Blocks = this.builderContext.context?.symbolId;
        this.node_3_Blocks = `symbol.data.${this.name}`;
        this.node_4_Blocks = this.builderContext.rootState?.[this.name];
    }
    ngAfterViewInit() {
        this.setAttributes(this.elRef0?.nativeElement, this.node_1_div);
    }
    ngOnChanges(changes) {
        if (typeof window !== "undefined") {
            this.node_0_div = {
                pointerEvents: "auto",
            };
            this.node_1_div = {
                ...(!this.builderContext.context?.symbolId && {
                    "builder-slot": this.name,
                }),
            };
            this.node_2_Blocks = this.builderContext.context?.symbolId;
            this.node_3_Blocks = `symbol.data.${this.name}`;
            this.node_4_Blocks = this.builderContext.rootState?.[this.name];
            this.setAttributes(this.elRef0?.nativeElement, this.node_1_div, changes["node_1_div"]?.currentValue);
        }
    }
    ngOnDestroy() {
        for (const fn of this._listenerFns.values()) {
            fn();
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: BuilderSlot, deps: [{ token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: BuilderSlot, isStandalone: true, selector: "builder-slot", inputs: { builderContext: "builderContext", name: "name", builderComponents: "builderComponents" }, viewQueries: [{ propertyName: "elRef0", first: true, predicate: ["elRef0"], descendants: true }], usesOnChanges: true, ngImport: i0, template: `
    <div [ngStyle]="node_0_div" #elRef0>
      <blocks
        [parent]="node_2_Blocks"
        [path]="node_3_Blocks"
        [context]="builderContext"
        [registeredComponents]="builderComponents"
        [blocks]="node_4_Blocks"
      ></blocks>
    </div>
  `, isInline: true, styles: [":host{display:contents}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { kind: "component", type: Blocks, selector: "blocks", inputs: ["blocks", "parent", "path", "styleProp", "className", "context", "linkComponent", "registeredComponents"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: BuilderSlot, decorators: [{
            type: Component,
            args: [{ selector: "builder-slot", template: `
    <div [ngStyle]="node_0_div" #elRef0>
      <blocks
        [parent]="node_2_Blocks"
        [path]="node_3_Blocks"
        [context]="builderContext"
        [registeredComponents]="builderComponents"
        [blocks]="node_4_Blocks"
      ></blocks>
    </div>
  `, standalone: true, imports: [CommonModule, Blocks], styles: [":host{display:contents}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.Renderer2 }]; }, propDecorators: { builderContext: [{
                type: Input
            }], name: [{
                type: Input
            }], builderComponents: [{
                type: Input
            }], elRef0: [{
                type: ViewChild,
                args: ["elRef0"]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2xvdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9ibG9ja3Mvc2xvdC9zbG90LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsU0FBUyxFQUdULEtBQUssR0FFTixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFRL0MsT0FBTyxNQUFNLE1BQU0sZ0NBQWdDLENBQUM7OztBQStCcEQsTUFBTSxDQUFDLE9BQU8sT0FBTyxXQUFXO0lBYzlCLGFBQWEsQ0FBQyxFQUFlLEVBQUUsS0FBVSxFQUFFLE9BQWE7UUFDdEQsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNQLE9BQU87U0FDUjtRQUNELE1BQU0sTUFBTSxHQUFHLE9BQU8sT0FBTyxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7UUFDaEUsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUNsQyxJQUFJLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ3hCLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7b0JBQzlCLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBRSxFQUFFLENBQUM7aUJBQy9CO2dCQUNELElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUNuQixHQUFHLEVBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQ2xCLEVBQUUsRUFDRixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQyxXQUFXLEVBQUUsRUFDbkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUNaLENBQ0YsQ0FBQzthQUNIO2lCQUFNO2dCQUNMLElB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QUFaLEtBQUs7Z0JBQ0csaUJBQWlCO3NCQUF6QixLQUFLO2dCQUVlLE1BQU07c0JBQTFCLFNBQVM7dUJBQUMsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgVmlld0NoaWxkLFxuICBFbGVtZW50UmVmLFxuICBSZW5kZXJlcjIsXG4gIElucHV0LFxuICBTaW1wbGVDaGFuZ2VzLFxufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vblwiO1xuXG5leHBvcnQgdHlwZSBEcm9wem9uZVByb3BzID0gQnVpbGRlckRhdGFQcm9wcyAmXG4gIEJ1aWxkZXJDb21wb25lbnRzUHJvcCAmIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYXR0cmlidXRlczogYW55O1xuICB9O1xuXG5pbXBvcnQgQmxvY2tzIGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2Jsb2Nrcy9ibG9ja3NcIjtcbmltcG9ydCB7IGRlb3B0U2lnbmFsIH0gZnJvbSBcIi4uLy4uL2Z1bmN0aW9ucy9kZW9wdFwiO1xuaW1wb3J0IHR5cGUgeyBCdWlsZGVyQmxvY2sgfSBmcm9tIFwiLi4vLi4vdHlwZXMvYnVpbGRlci1ibG9ja1wiO1xuaW1wb3J0IHR5cGUge1xuICBCdWlsZGVyQ29tcG9uZW50c1Byb3AsXG4gIEJ1aWxkZXJEYXRhUHJvcHMsXG59IGZyb20gXCIuLi8uLi90eXBlcy9idWlsZGVyLXByb3BzXCI7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogXCJidWlsZGVyLXNsb3RcIixcbiAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2IFtuZ1N0eWxlXT1cIm5vZGVfMF9kaXZcIiAjZWxSZWYwPlxuICAgICAgPGJsb2Nrc1xuICAgICAgICBbcGFyZW50XT1cIm5vZGVfMl9CbG9ja3NcIlxuICAgICAgICBbcGF0aF09XCJub2RlXzNfQmxvY2tzXCJcbiAgICAgICAgW2NvbnRleHRdPVwiYnVpbGRlckNvbnRleHRcIlxuICAgICAgICBbcmVnaXN0ZXJlZENvbXBvbmVudHNdPVwiYnVpbGRlckNvbXBvbmVudHNcIlxuICAgICAgICBbYmxvY2tzXT1cIm5vZGVfNF9CbG9ja3NcIlxuICAgICAgPjwvYmxvY2tzPlxuICAgIDwvZGl2PlxuICBgLFxuICBzdHlsZXM6IFtcbiAgICBgXG4gICAgICA6aG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGNvbnRlbnRzO1xuICAgICAgfVxuICAgIGAsXG4gIF0sXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIEJsb2Nrc10sXG59KVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnVpbGRlclNsb3Qge1xuICBASW5wdXQoKSBidWlsZGVyQ29udGV4dCE6IERyb3B6b25lUHJvcHNbXCJidWlsZGVyQ29udGV4dFwiXTtcbiAgQElucHV0KCkgbmFtZSE6IERyb3B6b25lUHJvcHNbXCJuYW1lXCJdO1xuICBASW5wdXQoKSBidWlsZGVyQ29tcG9uZW50cyE6IERyb3B6b25lUHJvcHNbXCJidWlsZGVyQ29tcG9uZW50c1wiXTtcblxuICBAVmlld0NoaWxkKFwiZWxSZWYwXCIpIGVsUmVmMCE6IEVsZW1lbnRSZWY7XG5cbiAgX2xpc3RlbmVyRm5zID0gbmV3IE1hcDxzdHJpbmcsICgpID0+IHZvaWQ+KCk7XG5cbiAgbm9kZV8wX2RpdiA9IG51bGw7XG4gIG5vZGVfMV9kaXYgPSBudWxsO1xuICBub2RlXzJfQmxvY2tzID0gbnVsbDtcbiAgbm9kZV8zX0Jsb2NrcyA9IG51bGw7XG4gIG5vZGVfNF9CbG9ja3MgPSBudWxsO1xuICBzZXRBdHRyaWJ1dGVzKGVsOiBIVE1MRWxlbWVudCwgdmFsdWU6IGFueSwgY2hhbmdlcz86IGFueSkge1xuICAgIGlmICghZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0ID0gdHlwZW9mIGNoYW5nZXMgPT09IFwidW5kZWZpbmVkXCIgPyB2YWx1ZSA6IGNoYW5nZXM7XG4gICAgT2JqZWN0LmtleXModGFyZ2V0KS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIm9uXCIpKSB7XG4gICAgICAgIGlmICh0aGlzLl9saXN0ZW5lckZucy5oYXMoa2V5KSkge1xuICAgICAgICAgIHRoaXMuX2xpc3RlbmVyRm5zLmdldChrZXkpISgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xpc3RlbmVyRm5zLnNldChcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oXG4gICAgICAgICAgICBlbCxcbiAgICAgICAgICAgIGtleS5yZXBsYWNlKFwib25cIiwgXCJcIikudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIHRhcmdldFtrZXldXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoZWwsIGtleS50b0xvd2VyQ2FzZSgpLCB0YXJnZXRba2V5XSA/PyBcIlwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMikge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLm5vZGVfMF9kaXYgPSB7XG4gICAgICBwb2ludGVyRXZlbnRzOiBcImF1dG9cIixcbiAgICB9O1xuICAgIHRoaXMubm9kZV8xX2RpdiA9IHtcbiAgICAgIC4uLighdGhpcy5idWlsZGVyQ29udGV4dC5jb250ZXh0Py5zeW1ib2xJZCAmJiB7XG4gICAgICAgIFwiYnVpbGRlci1zbG90XCI6IHRoaXMubmFtZSxcbiAgICAgIH0pLFxuICAgIH07XG4gICAgdGhpcy5ub2RlXzJfQmxvY2tzID0gdGhpcy5idWlsZGVyQ29udGV4dC5jb250ZXh0Py5zeW1ib2xJZCBhcyBzdHJpbmc7XG4gICAgdGhpcy5ub2RlXzNfQmxvY2tzID0gYHN5bWJvbC5kYXRhLiR7dGhpcy5uYW1lfWA7XG4gICAgdGhpcy5ub2RlXzRfQmxvY2tzID0gdGhpcy5idWlsZGVyQ29udGV4dC5yb290U3RhdGU/LltcbiAgICAgIHRoaXMubmFtZVxuICAgIF0gYXMgQnVpbGRlckJsb2NrW107XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVzKHRoaXMuZWxSZWYwPy5uYXRpdmVFbGVtZW50LCB0aGlzLm5vZGVfMV9kaXYpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLm5vZGVfMF9kaXYgPSB7XG4gICAgICAgIHBvaW50ZXJFdmVudHM6IFwiYXV0b1wiLFxuICAgICAgfTtcbiAgICAgIHRoaXMubm9kZV8xX2RpdiA9IHtcbiAgICAgICAgLi4uKCF0aGlzLmJ1aWxkZXJDb250ZXh0LmNvbnRleHQ/LnN5bWJvbElkICYmIHtcbiAgICAgICAgICBcImJ1aWxkZXItc2xvdFwiOiB0aGlzLm5hbWUsXG4gICAgICAgIH0pLFxuICAgICAgfTtcbiAgICAgIHRoaXMubm9kZV8yX0Jsb2NrcyA9IHRoaXMuYnVpbGRlckNvbnRleHQuY29udGV4dD8uc3ltYm9sSWQgYXMgc3RyaW5nO1xuICAgICAgdGhpcy5ub2RlXzNfQmxvY2tzID0gYHN5bWJvbC5kYXRhLiR7dGhpcy5uYW1lfWA7XG4gICAgICB0aGlzLm5vZGVfNF9CbG9ja3MgPSB0aGlzLmJ1aWxkZXJDb250ZXh0LnJvb3RTdGF0ZT8uW1xuICAgICAgICB0aGlzLm5hbWVcbiAgICAgIF0gYXMgQnVpbGRlckJsb2NrW107XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZXMoXG4gICAgICAgIHRoaXMuZWxSZWYwPy5uYXRpdmVFbGVtZW50LFxuICAgICAgICB0aGlzLm5vZGVfMV9kaXYsXG4gICAgICAgIGNoYW5nZXNbXCJub2RlXzFfZGl2XCJdPy5jdXJyZW50VmFsdWVcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgZm9yIChjb25zdCBmbiBvZiB0aGlzLl9saXN0ZW5lckZucy52YWx1ZXMoKSkge1xuICAgICAgZm4oKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==