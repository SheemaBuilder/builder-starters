import { Component, ViewChild, Input, } from "@angular/core";
import { CommonModule } from "@angular/common";
import { isEditing } from "../../functions/is-editing";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export default class ImgComponent {
    setAttributes(el, value, changes) {
        if (!el) {
            return;
        }
        const target = typeof changes === "undefined" ? value : changes;
        Object.keys(target).forEach((key) => {
            if (key.startsWith("on")) {
                if (this._listenerFns.has(key)) {
                    this._listenerFns.get(key)();
                }
                this._listenerFns.set(key, this.renderer.listen(el, key.replace("on", "").toLowerCase(), target[key]));
            }
            else {
                this.renderer.setAttribute(el, key.toLowerCase(), target[key] ?? "");
            }
        });
    }
    constructor(renderer) {
        this.renderer = renderer;
        this._listenerFns = new Map();
        this.node_0_img = null;
        this.node_1_img = null;
        this.elRef0_state_0 = null;
    }
    ngOnInit() {
        this.node_0_img = {
            objectFit: this.backgroundSize || "cover",
            objectPosition: this.backgroundPosition || "center",
        };
        this.node_1_img = (isEditing() && this.imgSrc) || "default-key";
        this.elRef0_state_0 = {};
    }
    ngAfterViewInit() {
        this.setAttributes(this.elRef0?.nativeElement, this.elRef0_state_0);
        this.setAttributes(this.elRef0?.nativeElement, this.attributes);
    }
    ngOnChanges(changes) {
        if (typeof window !== "undefined") {
            this.node_0_img = {
                objectFit: this.backgroundSize || "cover",
                objectPosition: this.backgroundPosition || "center",
            };
            this.node_1_img = (isEditing() && this.imgSrc) || "default-key";
            this.elRef0_state_0 = {};
            this.setAttributes(this.elRef0?.nativeElement, this.elRef0_state_0, changes["elRef0_state_0"]?.currentValue);
            this.setAttributes(this.elRef0?.nativeElement, this.attributes, changes["attributes"]?.currentValue);
        }
    }
    ngOnDestroy() {
        for (const fn of this._listenerFns.values()) {
            fn();
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: ImgComponent, deps: [{ token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: ImgComponent, isStandalone: true, selector: "img-component", inputs: { backgroundSize: "backgroundSize", backgroundPosition: "backgroundPosition", imgSrc: "imgSrc", altText: "altText", image: "image", attributes: "attributes" }, viewQueries: [{ propertyName: "elRef0", first: true, predicate: ["elRef0"], descendants: true }], usesOnChanges: true, ngImport: i0, template: `
    <img
      [ngStyle]="node_0_img"
      [attr.alt]="altText"
      [attr.src]="imgSrc || image"
      #elRef0
    />
  `, isInline: true, styles: [":host{display:contents}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: ImgComponent, decorators: [{
            type: Component,
            args: [{ selector: "img-component", template: `
    <img
      [ngStyle]="node_0_img"
      [attr.alt]="altText"
      [attr.src]="imgSrc || image"
      #elRef0
    />
  `, standalone: true, imports: [CommonModule], styles: [":host{display:contents}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.Renderer2 }]; }, propDecorators: { backgroundSize: [{
                type: Input
            }], backgroundPosition: [{
                type: Input
            }], imgSrc: [{
                type: Input
            }], altText: [{
                type: Input
            }], image: [{
                type: Input
            }], attributes: [{
                type: Input
            }], elRef0: [{
                type: ViewChild,
                args: ["elRef0"]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2Jsb2Nrcy9pbWcvaW1nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsU0FBUyxFQUdULEtBQUssR0FFTixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUF3Qi9DLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQzs7O0FBd0J2RCxNQUFNLENBQUMsT0FBTyxPQUFPLFlBQVk7SUFlL0IsYUFBYSxDQUFDLEVBQWUsRUFBRSxLQUFVLEVBQUUsT0FBYTtRQUN0RCxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ1AsT0FBTztTQUNSO1FBQ0QsTUFBTSxNQUFNLEdBQUcsT0FBTyxPQUFPLEtBQUssV0FBVyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztRQUNoRSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1lBQ2xDLElBQUksR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDeEIsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRTtvQkFDOUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFFLEVBQUUsQ0FBQztpQkFDL0I7Z0JBQ0QsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQ25CLEdBQUcsRUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FDbEIsRUFBRSxFQUNGLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUNuQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1osQ0FDRixDQUFDO2FBQ0g7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxXQUFXLEVBQUUsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7YUFDdEU7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxZQUFvQixRQUFtQjtRQUFuQixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBN0J2QyxpQkFBWSxHQUFHLElBQUksR0FBRyxFQUFzQixDQUFDO1FBRTdDLGVBQVUsR0FBRyxJQUFJLENBQUM7UUFDbEIsZUFBVSxHQUFHLElBQUksQ0FBQztRQUNsQixtQkFBYyxHQUFHLElBQUksQ0FBQztJQXlCb0IsQ0FBQztJQUUzQyxRQUFRO1FBQ04sSUFBSSxDQUFDLFVBQVUsR0FBRztZQUNoQixTQUFTLEVBQUUsSUFBSSxDQUFDLGNBQWMsSUFBSSxPQUFPO1lBQ3pDLGNBQWMsRUFBRSxJQUFJLENBQUMsa0JBQWtCLElBQUksUUFBUTtTQUNwRCxDQUFDO1FBQ0YsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLFNBQVMsRUFBRSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxhQUFhLENBQUM7UUFDaEUsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVELGVBQWU7UUFDYixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNwRSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBRUQsV0FBVyxDQUFDLE9BQXNCO1FBQ2hDLElBQUksT0FBTyxNQUFNLEtBQUssV0FBVyxFQUFFO1lBQ2pDLElBQUksQ0FBQyxVQUFVLEdBQUc7Z0JBQ2hCLFNBQVMsRUFBRSxJQUFJLENBQUMsY0FBYyxJQUFJLE9BQU87Z0JBQ3pDLGNBQWMsRUFBRSxJQUFJLENBQUMsa0JBQWtCLElBQUksUUFBUTthQUNwRCxDQUFDO1lBQ0YsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLFNBQVMsRUFBRSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxhQUFhLENBQUM7WUFDaEUsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7WUFDekIsSUFBSSxDQUFDLGFBQWEsQ0FDaEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxhQUFhLEVBQzFCLElBQUksQ0FBQyxjQUFjLEVBQ25CLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLFlBQVksQ0FDeEMsQ0FBQztZQUNGLElBQUksQ0FBQyxhQUFhLENBQ2hCLElBQUksQ0FBQyxNQUFNLEVBQUUsYUFBYSxFQUMxQixJQUFJLENBQUMsVUFBVSxFQUNmLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFBRSxZQUFZLENBQ3BDLENBQUM7U0FDSDtJQUNILENBQUM7SUFFRCxXQUFXO1FBQ1QsS0FBSyxNQUFNLEVBQUUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQzNDLEVBQUUsRUFBRSxDQUFDO1NBQ047SUFDSCxDQUFDOytHQWhGa0IsWUFBWTttR0FBWixZQUFZLHdXQWxCckI7Ozs7Ozs7R0FPVCxrR0FTUyxZQUFZOzs0RkFFSCxZQUFZO2tCQXBCaEMsU0FBUzsrQkFDRSxlQUFlLFlBQ2Y7Ozs7Ozs7R0FPVCxjQVFXLElBQUksV0FDUCxDQUFDLFlBQVksQ0FBQztnR0FHZCxjQUFjO3NCQUF0QixLQUFLO2dCQUNHLGtCQUFrQjtzQkFBMUIsS0FBSztnQkFDRyxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csT0FBTztzQkFBZixLQUFLO2dCQUNHLEtBQUs7c0JBQWIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUVlLE1BQU07c0JBQTFCLFNBQVM7dUJBQUMsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgVmlld0NoaWxkLFxuICBFbGVtZW50UmVmLFxuICBSZW5kZXJlcjIsXG4gIElucHV0LFxuICBTaW1wbGVDaGFuZ2VzLFxufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vblwiO1xuXG4vKipcbiAqIFRoaXMgaW1wb3J0IGlzIHVzZWQgYnkgdGhlIFN2ZWx0ZSBTREsuIERvIG5vdCByZW1vdmUuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBJbWdQcm9wcyB7XG4gIGF0dHJpYnV0ZXM/OiBhbnk7XG4gIGltZ1NyYz86IHN0cmluZzsgLy8gVE9ETyhtaXNrbyk6IEkgdGhpbmsgdGhpcyBpcyB1bnVzZWRcbiAgaW1hZ2U/OiBzdHJpbmc7XG4gIGFsdFRleHQ/OiBzdHJpbmc7XG4gIGJhY2tncm91bmRTaXplPzogXCJjb3ZlclwiIHwgXCJjb250YWluXCI7XG4gIGJhY2tncm91bmRQb3NpdGlvbj86XG4gICAgfCBcImNlbnRlclwiXG4gICAgfCBcInRvcFwiXG4gICAgfCBcImxlZnRcIlxuICAgIHwgXCJyaWdodFwiXG4gICAgfCBcImJvdHRvbVwiXG4gICAgfCBcInRvcCBsZWZ0XCJcbiAgICB8IFwidG9wIHJpZ2h0XCJcbiAgICB8IFwiYm90dG9tIGxlZnRcIlxuICAgIHwgXCJib3R0b20gcmlnaHRcIjtcbn1cblxuaW1wb3J0IHsgaXNFZGl0aW5nIH0gZnJvbSBcIi4uLy4uL2Z1bmN0aW9ucy9pcy1lZGl0aW5nXCI7XG5pbXBvcnQgeyBmaWx0ZXJBdHRycyB9IGZyb20gXCIuLi9oZWxwZXJzXCI7XG5pbXBvcnQgeyBzZXRBdHRycyB9IGZyb20gXCIuLi9oZWxwZXJzXCI7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogXCJpbWctY29tcG9uZW50XCIsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGltZ1xuICAgICAgW25nU3R5bGVdPVwibm9kZV8wX2ltZ1wiXG4gICAgICBbYXR0ci5hbHRdPVwiYWx0VGV4dFwiXG4gICAgICBbYXR0ci5zcmNdPVwiaW1nU3JjIHx8IGltYWdlXCJcbiAgICAgICNlbFJlZjBcbiAgICAvPlxuICBgLFxuICBzdHlsZXM6IFtcbiAgICBgXG4gICAgICA6aG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGNvbnRlbnRzO1xuICAgICAgfVxuICAgIGAsXG4gIF0sXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdLFxufSlcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltZ0NvbXBvbmVudCB7XG4gIEBJbnB1dCgpIGJhY2tncm91bmRTaXplITogSW1nUHJvcHNbXCJiYWNrZ3JvdW5kU2l6ZVwiXTtcbiAgQElucHV0KCkgYmFja2dyb3VuZFBvc2l0aW9uITogSW1nUHJvcHNbXCJiYWNrZ3JvdW5kUG9zaXRpb25cIl07XG4gIEBJbnB1dCgpIGltZ1NyYyE6IEltZ1Byb3BzW1wiaW1nU3JjXCJdO1xuICBASW5wdXQoKSBhbHRUZXh0ITogSW1nUHJvcHNbXCJhbHRUZXh0XCJdO1xuICBASW5wdXQoKSBpbWFnZSE6IEltZ1Byb3BzW1wiaW1hZ2VcIl07XG4gIEBJbnB1dCgpIGF0dHJpYnV0ZXMhOiBJbWdQcm9wc1tcImF0dHJpYnV0ZXNcIl07XG5cbiAgQFZpZXdDaGlsZChcImVsUmVmMFwiKSBlbFJlZjAhOiBFbGVtZW50UmVmO1xuXG4gIF9saXN0ZW5lckZucyA9IG5ldyBNYXA8c3RyaW5nLCAoKSA9PiB2b2lkPigpO1xuXG4gIG5vZGVfMF9pbWcgPSBudWxsO1xuICBub2RlXzFfaW1nID0gbnVsbDtcbiAgZWxSZWYwX3N0YXRlXzAgPSBudWxsO1xuICBzZXRBdHRyaWJ1dGVzKGVsOiBIVE1MRWxlbWVudCwgdmFsdWU6IGFueSwgY2hhbmdlcz86IGFueSkge1xuICAgIGlmICghZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0ID0gdHlwZW9mIGNoYW5nZXMgPT09IFwidW5kZWZpbmVkXCIgPyB2YWx1ZSA6IGNoYW5nZXM7XG4gICAgT2JqZWN0LmtleXModGFyZ2V0KS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIm9uXCIpKSB7XG4gICAgICAgIGlmICh0aGlzLl9saXN0ZW5lckZucy5oYXMoa2V5KSkge1xuICAgICAgICAgIHRoaXMuX2xpc3RlbmVyRm5zLmdldChrZXkpISgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xpc3RlbmVyRm5zLnNldChcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oXG4gICAgICAgICAgICBlbCxcbiAgICAgICAgICAgIGtleS5yZXBsYWNlKFwib25cIiwgXCJcIikudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIHRhcmdldFtrZXldXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoZWwsIGtleS50b0xvd2VyQ2FzZSgpLCB0YXJnZXRba2V5XSA/PyBcIlwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMikge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLm5vZGVfMF9pbWcgPSB7XG4gICAgICBvYmplY3RGaXQ6IHRoaXMuYmFja2dyb3VuZFNpemUgfHwgXCJjb3ZlclwiLFxuICAgICAgb2JqZWN0UG9zaXRpb246IHRoaXMuYmFja2dyb3VuZFBvc2l0aW9uIHx8IFwiY2VudGVyXCIsXG4gICAgfTtcbiAgICB0aGlzLm5vZGVfMV9pbWcgPSAoaXNFZGl0aW5nKCkgJiYgdGhpcy5pbWdTcmMpIHx8IFwiZGVmYXVsdC1rZXlcIjtcbiAgICB0aGlzLmVsUmVmMF9zdGF0ZV8wID0ge307XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVzKHRoaXMuZWxSZWYwPy5uYXRpdmVFbGVtZW50LCB0aGlzLmVsUmVmMF9zdGF0ZV8wKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZXModGhpcy5lbFJlZjA/Lm5hdGl2ZUVsZW1lbnQsIHRoaXMuYXR0cmlidXRlcyk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMubm9kZV8wX2ltZyA9IHtcbiAgICAgICAgb2JqZWN0Rml0OiB0aGlzLmJhY2tncm91bmRTaXplIHx8IFwiY292ZXJcIixcbiAgICAgICAgb2JqZWN0UG9zaXRpb246IHRoaXMuYmFja2dyb3VuZFBvc2l0aW9uIHx8IFwiY2VudGVyXCIsXG4gICAgICB9O1xuICAgICAgdGhpcy5ub2RlXzFfaW1nID0gKGlzRWRpdGluZygpICYmIHRoaXMuaW1nU3JjKSB8fCBcImRlZmF1bHQta2V5XCI7XG4gICAgICB0aGlzLmVsUmVmMF9zdGF0ZV8wID0ge307XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZXMoXG4gICAgICAgIHRoaXMuZWxSZWYwPy5uYXRpdmVFbGVtZW50LFxuICAgICAgICB0aGlzLmVsUmVmMF9zdGF0ZV8wLFxuICAgICAgICBjaGFuZ2VzW1wiZWxSZWYwX3N0YXRlXzBcIl0/LmN1cnJlbnRWYWx1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhcbiAgICAgICAgdGhpcy5lbFJlZjA/Lm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyxcbiAgICAgICAgY2hhbmdlc1tcImF0dHJpYnV0ZXNcIl0/LmN1cnJlbnRWYWx1ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBmb3IgKGNvbnN0IGZuIG9mIHRoaXMuX2xpc3RlbmVyRm5zLnZhbHVlcygpKSB7XG4gICAgICBmbigpO1xuICAgIH1cbiAgfVxufVxuIl19