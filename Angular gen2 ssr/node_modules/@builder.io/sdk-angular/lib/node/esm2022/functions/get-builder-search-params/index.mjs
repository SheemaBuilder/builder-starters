import { normalizeSearchParams } from '../../helpers/search/search';
import { isBrowser } from '../is-browser';
const BUILDER_SEARCHPARAMS_PREFIX = 'builder.';
const BUILDER_OPTIONS_PREFIX = 'options.';
/**
 * Receives a `URLSearchParams` object or a regular query object, and returns the subset of query params that are
 * relevant to the Builder SDK.
 *
 * @returns
 */
export const getBuilderSearchParams = (_options) => {
    if (!_options) {
        return {};
    }
    const options = normalizeSearchParams(_options);
    const newOptions = {};
    Object.keys(options).forEach(key => {
        if (key.startsWith(BUILDER_SEARCHPARAMS_PREFIX)) {
            const trimmedKey = key.replace(BUILDER_SEARCHPARAMS_PREFIX, '').replace(BUILDER_OPTIONS_PREFIX, '');
            newOptions[trimmedKey] = options[key];
        }
    });
    return newOptions;
};
export const getBuilderSearchParamsFromWindow = () => {
    if (!isBrowser()) {
        return {};
    }
    const searchParams = new URLSearchParams(window.location.search);
    return getBuilderSearchParams(searchParams);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnVuY3Rpb25zL2dldC1idWlsZGVyLXNlYXJjaC1wYXJhbXMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDcEUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMxQyxNQUFNLDJCQUEyQixHQUFHLFVBQVUsQ0FBQztBQUMvQyxNQUFNLHNCQUFzQixHQUFHLFVBQVUsQ0FBQztBQUUxQzs7Ozs7R0FLRztBQUNILE1BQU0sQ0FBQyxNQUFNLHNCQUFzQixHQUFHLENBQUMsUUFBbUQsRUFBRSxFQUFFO0lBQzVGLElBQUksQ0FBQyxRQUFRLEVBQUU7UUFDYixPQUFPLEVBQUUsQ0FBQztLQUNYO0lBQ0QsTUFBTSxPQUFPLEdBQUcscUJBQXFCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDaEQsTUFBTSxVQUFVLEdBQWdCLEVBQUUsQ0FBQztJQUNuQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtRQUNqQyxJQUFJLEdBQUcsQ0FBQyxVQUFVLENBQUMsMkJBQTJCLENBQUMsRUFBRTtZQUMvQyxNQUFNLFVBQVUsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLDJCQUEyQixFQUFFLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNwRyxVQUFVLENBQUMsVUFBVSxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3ZDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDSCxPQUFPLFVBQVUsQ0FBQztBQUNwQixDQUFDLENBQUM7QUFDRixNQUFNLENBQUMsTUFBTSxnQ0FBZ0MsR0FBRyxHQUFHLEVBQUU7SUFDbkQsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFO1FBQ2hCLE9BQU8sRUFBRSxDQUFDO0tBQ1g7SUFDRCxNQUFNLFlBQVksR0FBRyxJQUFJLGVBQWUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2pFLE9BQU8sc0JBQXNCLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDOUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBRdWVyeU9iamVjdCB9IGZyb20gJy4uLy4uL2hlbHBlcnMvc2VhcmNoL3NlYXJjaCc7XG5pbXBvcnQgeyBub3JtYWxpemVTZWFyY2hQYXJhbXMgfSBmcm9tICcuLi8uLi9oZWxwZXJzL3NlYXJjaC9zZWFyY2gnO1xuaW1wb3J0IHsgaXNCcm93c2VyIH0gZnJvbSAnLi4vaXMtYnJvd3Nlcic7XG5jb25zdCBCVUlMREVSX1NFQVJDSFBBUkFNU19QUkVGSVggPSAnYnVpbGRlci4nO1xuY29uc3QgQlVJTERFUl9PUFRJT05TX1BSRUZJWCA9ICdvcHRpb25zLic7XG5cbi8qKlxuICogUmVjZWl2ZXMgYSBgVVJMU2VhcmNoUGFyYW1zYCBvYmplY3Qgb3IgYSByZWd1bGFyIHF1ZXJ5IG9iamVjdCwgYW5kIHJldHVybnMgdGhlIHN1YnNldCBvZiBxdWVyeSBwYXJhbXMgdGhhdCBhcmVcbiAqIHJlbGV2YW50IHRvIHRoZSBCdWlsZGVyIFNESy5cbiAqXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgY29uc3QgZ2V0QnVpbGRlclNlYXJjaFBhcmFtcyA9IChfb3B0aW9uczogUXVlcnlPYmplY3QgfCBVUkxTZWFyY2hQYXJhbXMgfCB1bmRlZmluZWQpID0+IHtcbiAgaWYgKCFfb3B0aW9ucykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICBjb25zdCBvcHRpb25zID0gbm9ybWFsaXplU2VhcmNoUGFyYW1zKF9vcHRpb25zKTtcbiAgY29uc3QgbmV3T3B0aW9uczogUXVlcnlPYmplY3QgPSB7fTtcbiAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgIGlmIChrZXkuc3RhcnRzV2l0aChCVUlMREVSX1NFQVJDSFBBUkFNU19QUkVGSVgpKSB7XG4gICAgICBjb25zdCB0cmltbWVkS2V5ID0ga2V5LnJlcGxhY2UoQlVJTERFUl9TRUFSQ0hQQVJBTVNfUFJFRklYLCAnJykucmVwbGFjZShCVUlMREVSX09QVElPTlNfUFJFRklYLCAnJyk7XG4gICAgICBuZXdPcHRpb25zW3RyaW1tZWRLZXldID0gb3B0aW9uc1trZXldO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBuZXdPcHRpb25zO1xufTtcbmV4cG9ydCBjb25zdCBnZXRCdWlsZGVyU2VhcmNoUGFyYW1zRnJvbVdpbmRvdyA9ICgpID0+IHtcbiAgaWYgKCFpc0Jyb3dzZXIoKSkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICByZXR1cm4gZ2V0QnVpbGRlclNlYXJjaFBhcmFtcyhzZWFyY2hQYXJhbXMpO1xufSJdfQ==