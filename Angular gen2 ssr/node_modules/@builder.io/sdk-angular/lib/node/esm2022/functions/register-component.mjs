export const createRegisterComponentMessage = (info) => ({
    type: 'builder.registerComponent',
    data: serializeIncludingFunctions(info)
});
// eslint-disable-next-line @typescript-eslint/ban-types
const serializeFn = (fnValue) => {
    const fnStr = fnValue.toString().trim();
    // we need to account for a few different fn syntaxes:
    // 1. `function name(args) => {code}`
    // 2. `name(args) => {code}`
    // 3. `(args) => {}`
    // 4. `args => {}`
    // 5. `async function(args) {code}`
    // 6. `async (args) => {}`
    // 7. `async args => {}`
    const isArrowWithoutParens = /^[a-zA-Z0-9_]+\s*=>/i.test(fnStr);
    const appendFunction = !fnStr.startsWith('function') && !fnStr.startsWith('async') && !fnStr.startsWith('(') && !isArrowWithoutParens;
    return `return (${appendFunction ? 'function ' : ''}${fnStr}).apply(this, arguments)`;
};
export function serializeIncludingFunctions(info) {
    return JSON.parse(JSON.stringify(info, (key, value) => {
        if (typeof value === 'function') {
            return serializeFn(value);
        }
        return value;
    }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0ZXItY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2Z1bmN0aW9ucy9yZWdpc3Rlci1jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBTSxDQUFDLE1BQU0sOEJBQThCLEdBQUcsQ0FBQyxJQUFtQixFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3RFLElBQUksRUFBRSwyQkFBMkI7SUFDakMsSUFBSSxFQUFFLDJCQUEyQixDQUFDLElBQUksQ0FBQztDQUN4QyxDQUFDLENBQUM7QUFFSCx3REFBd0Q7QUFDeEQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxPQUFpQixFQUFFLEVBQUU7SUFDeEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0lBRXhDLHNEQUFzRDtJQUN0RCxxQ0FBcUM7SUFDckMsNEJBQTRCO0lBQzVCLG9CQUFvQjtJQUNwQixrQkFBa0I7SUFDbEIsbUNBQW1DO0lBQ25DLDBCQUEwQjtJQUMxQix3QkFBd0I7SUFDeEIsTUFBTSxvQkFBb0IsR0FBRyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEUsTUFBTSxjQUFjLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztJQUN0SSxPQUFPLFdBQVcsY0FBYyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxLQUFLLDBCQUEwQixDQUFDO0FBQ3hGLENBQUMsQ0FBQztBQUNGLE1BQU0sVUFBVSwyQkFBMkIsQ0FBQyxJQUFtQjtJQUM3RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUU7UUFDcEQsSUFBSSxPQUFPLEtBQUssS0FBSyxVQUFVLEVBQUU7WUFDL0IsT0FBTyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDM0I7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDTixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDb21wb25lbnRJbmZvIH0gZnJvbSAnLi4vdHlwZXMvY29tcG9uZW50cyc7XG5leHBvcnQgY29uc3QgY3JlYXRlUmVnaXN0ZXJDb21wb25lbnRNZXNzYWdlID0gKGluZm86IENvbXBvbmVudEluZm8pID0+ICh7XG4gIHR5cGU6ICdidWlsZGVyLnJlZ2lzdGVyQ29tcG9uZW50JyxcbiAgZGF0YTogc2VyaWFsaXplSW5jbHVkaW5nRnVuY3Rpb25zKGluZm8pXG59KTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbmNvbnN0IHNlcmlhbGl6ZUZuID0gKGZuVmFsdWU6IEZ1bmN0aW9uKSA9PiB7XG4gIGNvbnN0IGZuU3RyID0gZm5WYWx1ZS50b1N0cmluZygpLnRyaW0oKTtcblxuICAvLyB3ZSBuZWVkIHRvIGFjY291bnQgZm9yIGEgZmV3IGRpZmZlcmVudCBmbiBzeW50YXhlczpcbiAgLy8gMS4gYGZ1bmN0aW9uIG5hbWUoYXJncykgPT4ge2NvZGV9YFxuICAvLyAyLiBgbmFtZShhcmdzKSA9PiB7Y29kZX1gXG4gIC8vIDMuIGAoYXJncykgPT4ge31gXG4gIC8vIDQuIGBhcmdzID0+IHt9YFxuICAvLyA1LiBgYXN5bmMgZnVuY3Rpb24oYXJncykge2NvZGV9YFxuICAvLyA2LiBgYXN5bmMgKGFyZ3MpID0+IHt9YFxuICAvLyA3LiBgYXN5bmMgYXJncyA9PiB7fWBcbiAgY29uc3QgaXNBcnJvd1dpdGhvdXRQYXJlbnMgPSAvXlthLXpBLVowLTlfXStcXHMqPT4vaS50ZXN0KGZuU3RyKTtcbiAgY29uc3QgYXBwZW5kRnVuY3Rpb24gPSAhZm5TdHIuc3RhcnRzV2l0aCgnZnVuY3Rpb24nKSAmJiAhZm5TdHIuc3RhcnRzV2l0aCgnYXN5bmMnKSAmJiAhZm5TdHIuc3RhcnRzV2l0aCgnKCcpICYmICFpc0Fycm93V2l0aG91dFBhcmVucztcbiAgcmV0dXJuIGByZXR1cm4gKCR7YXBwZW5kRnVuY3Rpb24gPyAnZnVuY3Rpb24gJyA6ICcnfSR7Zm5TdHJ9KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpYDtcbn07XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplSW5jbHVkaW5nRnVuY3Rpb25zKGluZm86IENvbXBvbmVudEluZm8pIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaW5mbywgKGtleSwgdmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gc2VyaWFsaXplRm4odmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0pKTtcbn0iXX0=